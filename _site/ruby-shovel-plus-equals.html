<!DOCTYPE html>
<html> 
  <head>
    <meta charset="utf-8">
    
    <title>tundal45@github:~</title>
    <meta name="description" content="Ashish Dixit documenting his journey as a software developer">
    <meta name="keywords" content="tundal45 Ashish Dixit programming craftsmanship learning ruby rails sinatra web">
    <meta name="author" content="Ashish Dixit">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Raleway:100"> <!--Neucha | IM+Fell+DW+Pica+SC-->
  </head>
  <body>
    <div id="container">
      <header>
        <!--a href="/" id="gravatar">
          <img src="http://www.gravatar.com/avatar/e0a36a8c6ed7935cf1ccd1982bf4e53c.png">
        </a-->
        <div id="banner"><a href="/">tundal45@github:~</a></div>
        <div id="nav">
          <ul>
            <li>
              <a href="https://github.com/tundal45">
                <img src="github.png" alt="github" title="@tundal45 on GitHub">
              </a>
            </li>
            <li>
              <a href="https://twitter.com/#!/tundal45">
                <img src="twitter.png" alt="twitter" title="@tundal45 on Twitter">
              </a>
            </li>
            <li>
              <a href="http://tundal45.tumblr.com/">
                <img src="tumblr.png" alt="tumblr" title="@tundal45 on Tumblr">
              </a>
            </li>
            <li>
              <a href="#">
                <img src="rss.png" alt="rss" title="Subscribe to my blog feed">
              </a>
            </li>
          </ul>
        </div>
      </header>
      <div id="main" role="main">
        <h2>Shovel vs. Plus Equals operator in Ruby</h2>

<p>This is going to be first of what I hope to be many blog posts documenting my foray into Ruby programming. Foray might be a bad choice of word given that this is not my first attempt at learning the language. However, the approach that I am taking this time around is more active than my previous attempts so I am hopeful. Like any other endeavor, this too has a goal and a specific one at that - being able to build a foundation in Ruby in time for <a href="http://lonestarrubyconf.com/">Lone Star Ruby Conference</a> at the end of August.</p>

<p>The approach this time is to follow <a href="http://twitter.com/clarkware">Mike Clark</a>'s <a href="http://www.clarkware.com/cgi/blosxom/2005/03/18/RLT1">ad</a><a href="http://www.clarkware.com/cgi/blosxom/2005/03/18/RLT2">vice</a> and build tests as I delve into different features of Ruby while reading <a href="http://www.manning.com/black2/">The Well Grounded Rubyist</a> by <a href="http://twitter.com/david_a_black">David A. Black</a>.</p>

<p>The reason I am optimistic about this approach is because I am currently working through the wonderful <a href="http://github.com/edgecase/ruby_koans">Ruby Koans</a> created by the good folks over at <a href="http://edgecase.com/home">EdgeCase</a>. Ruby Koans was what introduced me to Mike Clark's approach on learning different facets of Ruby. This is a great starting point for anyone who is new to Ruby as it introduces both the core concepts or Ruby while introducing the idea of testing. Since we are not writing code, it is not test-first-development but more of an inquiry into the ruby interpreter through test cases. The best part about Ruby Koans so far is the question that are posed that forces you to move away from the hows that the tests focus on to more of the whys. I am going to focus on one such whys on this post.</p>

<p>The question posed in one of the Koans was in regards to String modification. The tests were for the shovel (&lt;&lt;) and plus equals (+=) operators. The question was:</p>

<blockquote><p>"Ruby programmers tend to favor the shovel operator (&lt;&lt;) over the plus equals operator (&lt;&lt;) when building up strings.  Why?"</p></blockquote>

<p>At first, I did not pay attention to this and was about to move to the next failing test. However, since I wanted to do proper justice to my learning experience, I decided to think a little bit about the the two operators in relation to the question being posed. My gut feeling told me that it probably had to do with the fact that the shovel (&lt;&lt;) operator modifies the actual object while the plus equals (+=) operator created a new object altogether.</p>

<p>Of course, I was afraid of being wrong and wanted to verify this. I was about to fire up IRB to test it out when I remembered Mike Clark's approach to learning and thought I should write a test to see if what I was thinking was the answer was true. So, I decided to write a quick test:</p>

<div class="highlight"><pre><code class="ruby"><span class="nb">require</span> <span class="s1">&#39;test/unit&#39;</span>

<span class="k">class</span> <span class="nc">StringTest</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

  <span class="k">def</span> <span class="nf">test_plus_equals_creates_new_object</span>
    <span class="n">original_string</span> <span class="o">=</span> <span class="s2">&quot;Hello, &quot;</span>
    <span class="n">hi</span> <span class="o">=</span> <span class="n">original_string</span>
    <span class="n">assert_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
    <span class="n">there</span> <span class="o">=</span> <span class="s2">&quot;World&quot;</span>
    <span class="n">hi</span> <span class="o">+=</span> <span class="n">there</span>
    <span class="n">assert_not_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_shovel_does_not_create_new_object</span>
    <span class="n">original_string</span> <span class="o">=</span> <span class="s2">&quot;Hello, &quot;</span>
    <span class="n">hi</span> <span class="o">=</span> <span class="n">original_string</span>
    <span class="n">assert_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
    <span class="n">there</span> <span class="o">=</span> <span class="s2">&quot;World&quot;</span>
    <span class="n">hi</span> <span class="o">&lt;&lt;</span> <span class="n">there</span>
    <span class="n">assert_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>


<p>The test proved my initial hunch. I was going to leave it at that but then I remembered that Array also use both operators. So I wrote another test to verify that the behavior is the same for Arrays:</p>

<div class="highlight"><pre><code class="ruby"><span class="nb">require</span> <span class="s1">&#39;test/unit&#39;</span>

<span class="k">class</span> <span class="nc">ArrayTest</span> <span class="o">&lt;</span> <span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>

  <span class="k">def</span> <span class="nf">test_plus_equals_creates_new_object</span>
    <span class="n">original_string</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;Hello&quot;</span><span class="o">]</span>
    <span class="n">hi</span> <span class="o">=</span> <span class="n">original_string</span>
    <span class="n">assert_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
    <span class="n">there</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;World&quot;</span><span class="o">]</span>
    <span class="n">hi</span> <span class="o">+=</span> <span class="n">there</span>
    <span class="n">assert_not_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_shovel_does_not_create_new_object</span>
    <span class="n">original_string</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;Hello&quot;</span><span class="o">]</span>
    <span class="n">hi</span> <span class="o">=</span> <span class="n">original_string</span>
    <span class="n">assert_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
    <span class="n">there</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;World&quot;</span><span class="o">]</span>
    <span class="n">hi</span> <span class="o">&lt;&lt;</span> <span class="n">there</span>
    <span class="n">assert_equal</span> <span class="n">original_string</span><span class="o">.</span><span class="n">object_id</span><span class="p">,</span> <span class="n">hi</span><span class="o">.</span><span class="n">object_id</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre>
</div>


<p>So long story short, the reason why Ruby programmers prefer the shovel operator (&lt;&lt;) over the plus equals (+=) operator when building strings is to avoid creating multiple objects during the process. If there are subtleties that I am missing or if I am completely wrong, I would love to hear from people and improve upon what I have learned so far.</p>


      </div>
      <footer>
      
      </footer>
    </div>
  </body>
</html>
